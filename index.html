<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>file encrypter</title>
		<script src="jsencrypt.js"></script>
	</head>
	<body>

		<input type="file" id="files" name="files[]" multiple />
		<ul id="fileList"></ul>


<input id="private-key" type="hidden"
 value="-----BEGIN RSA PRIVATE KEY-----
MIICXQIBAAKBgQDlOJu6TyygqxfWT7eLtGDwajtNFOb9I5XRb6khyfD1Yt3YiCgQ
WMNW649887VGJiGr/L5i2osbl8C9+WJTeucF+S76xFxdU6jE0NQ+Z+zEdhUTooNR
aY5nZiu5PgDB0ED/ZKBUSLKL7eibMxZtMlUDHjm4gwQco1KRMDSmXSMkDwIDAQAB
AoGAfY9LpnuWK5Bs50UVep5c93SJdUi82u7yMx4iHFMc/Z2hfenfYEzu+57fI4fv
xTQ//5DbzRR/XKb8ulNv6+CHyPF31xk7YOBfkGI8qjLoq06V+FyBfDSwL8KbLyeH
m7KUZnLNQbk8yGLzB3iYKkRHlmUanQGaNMIJziWOkN+N9dECQQD0ONYRNZeuM8zd
8XJTSdcIX4a3gy3GGCJxOzv16XHxD03GW6UNLmfPwenKu+cdrQeaqEixrCejXdAF
z/7+BSMpAkEA8EaSOeP5Xr3ZrbiKzi6TGMwHMvC7HdJxaBJbVRfApFrE0/mPwmP5
rN7QwjrMY+0+AbXcm8mRQyQ1+IGEembsdwJBAN6az8Rv7QnD/YBvi52POIlRSSIM
V7SwWvSK4WSMnGb1ZBbhgdg57DXaspcwHsFV7hByQ5BvMtIduHcT14ECfcECQATe
aTgjFnqE/lQ22Rk0eGaYO80cc643BXVGafNfd9fcvwBMnk0iGX0XRsOozVt5Azil
psLBYuApa66NcVHJpCECQQDTjI2AQhFc1yRnCU/YgDnSpJVm1nASoRUnU8Jfm3Oz
uku7JUXcVpt08DFSceCEX9unCuMcT72rAQlLpdZir876
-----END RSA PRIVATE KEY-----" />
<input id="public-key" type="hidden"
 value="-----BEGIN PUBLIC KEY-----
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCUGpCY47baEDHLaoXMti4lHozHwRLtOK+jZAlgZlue/Wykfw40Lj6rGZgChQ/QwMPd1Nmnr2qWCjkeROwHSX4p2RtLOQjFreMMW32KOjOrpKKSQKld+eD+HeftFO5FrHGuXrR81apFa0yNZTSZhr2LI2jAiyloGiykW9Tvew7XvVGMLdBmtWVRkWYNnQkA/9iaT5HwpQ259GEMR7W3UDmlirDHRTYcNAWaCzk0nlHFOQP4JojlV53nu+/+zRuc3sl4yVJ489TrFYTK5GzzhL54irth4IkX1ajALUBsRDPg2Chji0hbaSCxuLkgb9evSLto0QjOHYreR5OFLFfOfZVb" />
		<script>
var privateKey = document.getElementById('private-key').value
var encrypt = new JSEncrypt()
encrypt.setPrivateKey(privateKey)
alert(encrypt.encrypt("abc"))

// Check for the various File API support.
if (window.File && window.FileReader && window.FileList && window.Blob) {
  	// Great success! All the File APIs are supported.
} else {
  	alert('The File APIs are not fully supported in this browser.');
}
function handleFileSelect(evt) {
  	var fileList = document.getElementById('fileList');
	while (fileList.firstChild) fileList.removeChild(fileList.firstChild)

    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
		var reader = new FileReader()
			reader.onload = (function(f) {
				return function(file) {
					setSaveFile(file.target.result,f.name)
				}
			})(f)
		reader.readAsBinaryString(f)

    }
}

document.getElementById('files').addEventListener('change', handleFileSelect, false);

function setSaveFile(contents, file_name, mime_type) {
  	var fileList = document.getElementById('fileList');
  	var li = document.createElement('li');
  	var a = document.createElement('a');
  	li.appendChild(a)
  		mime_type = mime_type || 'application/octet-stream'; // text/html, image/png, et c
  	if (file_name) a.setAttribute('download', file_name);
  	a.href = 'data:'+ mime_type +';base64,'+ btoa(contents || '');
  	a.innerHTML = file_name
  		fileList.appendChild(li)
}
		</script>
	</body>
</html>
